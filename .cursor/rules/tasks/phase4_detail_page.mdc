---
description:
globs:
alwaysApply: false
---
# Phase 4: è©³ç´°ãƒšãƒ¼ã‚¸ â€“ å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—è¨­è¨ˆæ›¸

## 1. ç›®çš„ (Goal)
GitHub ãƒªãƒã‚¸ãƒˆãƒªã®è©³ç´°æƒ…å ±ï¼ˆãƒªãƒã‚¸ãƒˆãƒªåãƒ»ã‚ªãƒ¼ãƒŠãƒ¼åãƒ»è¨€èªãƒ»Starsï¼Watchersï¼Forksï¼Issuesï¼‰ã‚’è¡¨ç¤ºã™ã‚‹è©³ç´°ãƒšãƒ¼ã‚¸ã‚’å®Ÿè£…ã—ã€æ¤œç´¢ãƒšãƒ¼ã‚¸ã‹ã‚‰ã®é·ç§»ã‚’å®Œçµã•ã›ã‚‹ã€‚

## 2. æˆæœç‰© (Deliverables)
- `src/lib/github.ts`: èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ `Bearer` æ–¹å¼ã«å¤‰æ›´
- `src/app/api/github/repo/route.ts`: è©³ç´°å–å¾— API ãƒ«ãƒ¼ãƒˆ
- `src/app/repo/[owner]/[name]/page.tsx`: Server Component è©³ç´°ãƒšãƒ¼ã‚¸
- `src/components/RepoDetailCard.tsx`: è©³ç´°æƒ…å ±è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/components/Toast.tsx`: å…±é€šã‚¨ãƒ©ãƒ¼é€šçŸ¥ï¼ˆå†åˆ©ç”¨å¯ï¼‰
- `src/components/Skeleton.tsx`: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”¨ã‚¹ã‚±ãƒ«ãƒˆãƒ³ï¼ˆå†åˆ©ç”¨å¯ï¼‰
- `src/lib/github.spec.ts`: è¿½åŠ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆ`getRepositoryDetails`ï¼‰

## 3. å‰ææ¡ä»¶ (Prerequisites)
- Phase 3 (æ¤œç´¢ãƒšãƒ¼ã‚¸) ãŒå®Œäº†ã—ã¦ã„ã‚‹ã“ã¨
- `.env.local` ã« `GH_PAT` ãŒè¨­å®šæ¸ˆã¿ã§ã‚ã‚‹ã“ã¨
- `@tanstack/react-query` ã¨ `shadcn/ui` ãŒå°å…¥æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨

## 4. å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ— (Implementation Steps)

| ID | ã‚¿ã‚¹ã‚¯ | æ‹…å½“è€… | çŠ¶æ…‹ | è©³ç´° |
| :-- | :----- | :--- | :--- | :---- |
| **4.1** | **GitHub API ãƒ©ãƒƒãƒ‘æ›´æ–°** | Agent | ğŸ”²æœªç€æ‰‹ | 1. `getRepositoryDetails` ã§ `Authorization: Bearer ${GH_PAT}` ã‚’ä½¿ç”¨<br>2. æˆ»ã‚Šå€¤ã‚’ `Repository` å‹ã§çµ±ä¸€ã—ã€å‘¼ã³å‡ºã—å´ã®å‹æ³¨é‡ˆã‚’æ›´æ–° |
| **4.2** | **API Route `/api/github/repo`** | Agent | ğŸ”²æœªç€æ‰‹ | 1. `owner` / `name` ã‚’ `searchParams` ã‹ã‚‰å–å¾—<br>2. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³: ã©ã¡ã‚‰ã‹ãŒæ¬ ã‘ã¦ã„ã‚‹å ´åˆ `400` ã‚’è¿”ã™<br>3. `getRepositoryDetails` ã‚’å‘¼ã³å‡ºã—ã€æˆåŠŸæ™‚ `{ repo }`ã€å¤±æ•—æ™‚ `{ message }` ã‚’è¿”ã™ |
| **4.3** | **Server Component ãƒ«ãƒ¼ãƒˆ** | Agent | ğŸ”²æœªç€æ‰‹ | 1. `generateStaticParams` ã¯å®Ÿè£…ä¸è¦ï¼ˆå‹•çš„ãƒ«ãƒ¼ãƒˆï¼‰<br>2. `fetch` ã§ `/api/github/repo?owner={owner}&name={name}` ã‚’ SSR å–å¾—<br>3. `Suspense` ã¨ `Skeleton` ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡¨ç¤º |
| **4.4** | **`RepoDetailCard` å®Ÿè£…** | Agent | ğŸ”²æœªç€æ‰‹ | 1. é»’åŸºèª¿ (GitHub Dark é¢¨) ã®ã‚«ãƒ¼ãƒ‰ UI<br>2. è¡¨ç¤ºé …ç›®ã‚’æ¨ªä¸¦ã³ã‚°ãƒªãƒƒãƒ‰ã§é…ç½®<br>3. ã‚¹ã‚¿ãƒ¼ï¼ã‚¦ã‚©ãƒƒãƒãƒ£ãƒ¼ç­‰ã¯ `Intl.NumberFormat` ã§3æ¡ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š |
| **4.5** | **ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³** | Agent | ğŸ”²æœªç€æ‰‹ | 1. ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã« `Link` ã§ã€Œâ† æ¤œç´¢ã«æˆ»ã‚‹ã€<br>2. `useRouter().back()` ä½µç”¨ã§å±¥æ­´ã«åŸºã¥ãæˆ»ã‚Šã‚‚è¨±å¯ |
| **4.6** | **å…±é€šã‚¨ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¹ãƒˆ** | Agent | ğŸ”²æœªç€æ‰‹ | 1. `shadcn/ui` ã® `Toast` ã‚’ãƒ©ãƒƒãƒ—<br>2. API ãƒ«ãƒ¼ãƒˆãŒ `4xx` ã‚’è¿”ã—ãŸéš›ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º |
| **4.7** | **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆè¿½åŠ ** | Agent | ğŸ”²æœªç€æ‰‹ | 1. `getRepositoryDetails` æˆåŠŸ/å¤±æ•—ã‚±ãƒ¼ã‚¹<br>2. `/api/github/repo` ãƒ«ãƒ¼ãƒˆã® 200 / 400 / 404 ãƒ†ã‚¹ãƒˆ |

## 5. æ±ºå®šäº‹é …ã‚µãƒãƒª (Decision Summary)
- **è¡¨ç¤ºé …ç›®**: ãƒªãƒã‚¸ãƒˆãƒªåãƒ»ã‚ªãƒ¼ãƒŠãƒ¼åãƒ»è¨€èªãƒ»Starsãƒ»Watchersãƒ»Forksãƒ»Issuesã€‚
- **ãƒ†ãƒ¼ãƒ**: å¸¸æ™‚é»’èƒŒæ™¯ã€‚ã‚«ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ã¯ Tailwind ã® `slate-900`/`slate-800` ã‚’åŸºèª¿ã«èª¿æ•´ã€‚
- **ã‚¨ãƒ©ãƒ¼é€šçŸ¥**: 403/429 ãªã© API ç”±æ¥ã®ã‚¨ãƒ©ãƒ¼ã¯ `Toast` ã§è¡¨ç¤ºã€‚ãƒãƒƒã‚¯ã‚ªãƒ•ç§’æ•°è¡¨ç¤ºã¯å®Ÿè£…ã—ãªã„ã€‚
- **SEO**: `metadata` ã« `title` ã¨ `description` ã‚’è¨­å®šã—ã€å‹•çš„ãƒ¡ã‚¿ã«å¯¾å¿œã€‚
